-- Use this script for Oracle Database version 12.1 and lower as it allows of object name length greater than 30
-- Please note IDENTITY field feature was introduced in Oracle Version 12.1 and will not work in lower versions. Please use sequences instead for older versions 

-- DROP TABLE DEMO_SENTIMENTANALYSIS_TH;

-- Create a Table to store data
CREATE TABLE DEMO_SENTIMENTANALYSIS_TH
(
    ID                     NUMBER GENERATED ALWAYS AS IDENTITY
   ,PERIOD                 VARCHAR2( 500 ) NOT NULL
   ,MANAGER                VARCHAR2( 500 ) NOT NULL
   ,TEAM                   VARCHAR2( 500 ) NOT NULL
   ,RESPONSE               VARCHAR2( 4000 ) NOT NULL -- this will store raw text of survey response
   ,KEY_PHRASES            VARCHAR2( 4000 ) -- this will store the comma separated list of key phrases generated by Azure API
   ,SENTIMENT_SCORE        NUMBER -- this will store the sentiment score generated by Azure API
   ,DW_CREATION_DATE       DATE DEFAULT SYSDATE
   ,DW_LAST_UPDATED_DATE   DATE
);

-- create a unique index
CREATE UNIQUE INDEX DEMO_SENTIANALYSIS_TH_PK
    ON DEMO_SENTIMENTANALYSIS_TH( ID )
    ONLINE;

-- create a primary key
ALTER TABLE DEMO_SENTIMENTANALYSIS_TH
    ADD CONSTRAINT DEMO_SENTIANALYSIS_TH_PK PRIMARY KEY
    (ID )
 USING INDEX DEMO_SENTIANALYSIS_TH_PK ENABLE VALIDATE;
